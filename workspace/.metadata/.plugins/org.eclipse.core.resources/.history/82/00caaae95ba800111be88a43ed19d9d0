package models;

import java.beans.PropertyChangeListener;
import java.beans.PropertyChangeSupport;
import java.util.LinkedList;
import java.util.List;

public class
SnapshotsListModel 
implements IModel
{
	private List<Object> snapshots_list 
		= new LinkedList<Object>();
	
	protected transient PropertyChangeSupport listeners 
		= new PropertyChangeSupport(this);
	
	/**
     * Adds a property-change listener.
     * 
     * @param l the listener
     */
    public void 
    addPropertyChangeListener
    ( PropertyChangeListener l )
    {
        if (l == null) {
            throw new IllegalArgumentException();
        }
        this.listeners.addPropertyChangeListener(l);
    }
    
    
    public void 
    removePropertyChangeListener
    (PropertyChangeListener l)
    {
        this.listeners.removePropertyChangeListener(l);
    }
    
    /**
     * Notifies all listeners to a model-change
     * 
     * @param prop the property-id
     * @param old the old-value
     * @param newValue the new value
     */
    protected void 
    firePropertyChange
    ( String prop, Object old, Object newValue )
    {
        if (this.listeners.hasListeners(prop)) {
            this.listeners.firePropertyChange(prop, old, newValue);
        }
    }
    
    public void 
	setAdditionalSnapshot
	(Snapshot snapshot) 
	{
		boolean should_add 
			= this.snapshots_list.isEmpty() 
			|| this.snapshots_list.get(this.snapshots_list.size() - 1) != snapshot;
		
		if(should_add){
			this.snapshots_list.add(snapshot);
			this.firePropertyChange(Constants.SNAPSHOT_PROPERTY, null, this.snapshots_list);
			System.out.println("setAdditionalSnapshot(): snapshots_list length: " + this.snapshots_list.size());
		}
	}

	public List<Object> 
	getSnapshotsList() 
	{
		return this.snapshots_list;
	}
}

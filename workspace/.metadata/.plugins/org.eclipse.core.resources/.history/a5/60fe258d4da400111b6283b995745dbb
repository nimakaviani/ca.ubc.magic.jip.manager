package actions.toolbar;

import jipplugin.Activator;
import jipplugin.Constants;
import jipplugin.DetailsDialog;
import jipplugin.JIPView;

import org.eclipse.jface.action.Action;
import org.eclipse.jface.dialogs.InputDialog;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.ui.PlatformUI;

import actions.ControllerDelegate;

public class ConfigureAction 
extends Action 
{
	ControllerDelegate 		controller;
	
	private DetailsDialog 	dialog;
	
	public 
	ConfigureAction
	( JIPView jipView )
	{
		controller = new ControllerDelegate();
		
		this.setToolTipText("Set the path, name, port, and host to work with.");
		this.setImageDescriptor(Activator.getImageDescriptor("icons/configure.gif"));
		
		Shell shell
			= PlatformUI.getWorkbench().getActiveWorkbenchWindow().getShell();
		dialog 
			= new DetailsDialog(shell, controller);
		
		this.controller.addModel(Activator.getDefault().getModel());
		this.controller.addView(jipView);
		this.controller.addView(dialog);
	}
	
	@Override
	public void 
	run()
	{
		if(dialog.open() != InputDialog.OK){
			return;
		}		
	}
	
	public 
	void setPath
	( String path )
	{
		this.controller.setModelProperty(Constants.PATH_PROPERTY, path);
	}
}

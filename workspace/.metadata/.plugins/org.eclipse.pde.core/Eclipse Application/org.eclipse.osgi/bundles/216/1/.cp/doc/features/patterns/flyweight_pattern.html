<html>

<head>
<title>Flyweight Pattern</title>
</head>

<body>

<table border="0" cellpadding="0" cellspacing="0" width="700">
  <tr>
    <td><h1><font face="Verdana" color="#CC0000"><b>Flyweight Pattern</b></font></h1>
    <p>The <img src="../../images/gof.gif" width="16" height="16" alt="gof.gif (158 bytes)">
    Flyweight Pattern uses sharing to support large numbers of fine-grained
    objects efficiently. A <strong>flyweight</strong> is a shared object that
    can be used in multiple contexts simultaneously. The flyweight acts as an
    independent object in each context - it's indistinguishable from an instance
    of the object that's not shared. Flyweights cannot make assumptions about
    the context in which they operate. The key concept here is the distinction
    between <strong>intrinsic</strong> and <strong>extrinsic</strong> state.
    Intrinsic state is stored in the flyweight; it consists of information
    that's independent of the flyweight's context, thereby making it sharable.
    Extrinsic state depends on and varies with the flyweight's context and
    therefore can't be shared. Client objects are responsible for passing
    extrinsic state to the flyweight when it needs it.</p>
    <blockquote>
      <p><a href="#Wizard">Wizard</a><br>
      <a href="#Applicability">Applicability</a><br>
      <a href="#AdditionalResources">Additional Resources</a></p>
    </blockquote>
    <h3><a name="Wizard">Wizard</a></h3>
    <p><img src="../../images/patterns/flyweight_wizard1.gif"></p>
    <table border="1" cellspacing="0" width="100%">
      <tr>
        <td align="center" height="19"><strong>Option</strong></td>
        <td align="center" height="19"><strong>Description</strong></td>
        <td align="center" height="19"><strong>Default</strong></td>
      </tr>
      <tr>
        <td valign="top" align="left" height="57">Source folder</td>
        <td valign="top" align="left" height="57">Enter a source folder for the new class. Either
        type a valid source folder path or click&nbsp;<span CLASS="Label">Browse</span> to select
        a source folder via a dialog.</td>
        <td valign="top" align="left" height="57">The source folder of the element that was
        selected when the wizard was started.</td>
      </tr>
      <tr>
        <td valign="top" align="left" height="57">Package</td>
        <td valign="top" align="left" height="57">Enter a package to contain the new class. Either
        type a valid package name or click&nbsp;<span CLASS="Label">Browse</span> to select a
        package via a dialog.</td>
        <td valign="top" align="left" height="57">The package of the element that was selected
        when the wizard was started.</td>
      </tr>
      <tr>
        <td valign="top" align="left">Flyweight interface</td>
        <td valign="top" align="left">Type or click&nbsp;<span CLASS="Label">Browse</span>
        to select a flyweight interface class</td>
        <td valign="top" align="left">&lt;Flyweight&gt;</td>
      </tr>
      <tr>
        <td valign="top" align="left">Method</td>
        <td valign="top" align="left">Click&nbsp;Add to enter return types and names of sample
          methods that
        should be created in the flyweight classes&nbsp;</td>
        <td valign="top" align="left">&lt;blank&gt;</td>
      </tr>
      <tr>
        <td valign="top" align="left">Client interface</td>
        <td valign="top" align="left">Type or click&nbsp;<span CLASS="Label">Browse</span>
        to select a client interface class</td>
        <td valign="top" align="left">&lt;FlyweightClient&gt;</td>
      </tr>
      <tr>
        <td valign="top" align="left" height="19">Factory class</td>
        <td valign="top" align="left" height="19">Type or click&nbsp;<span CLASS="Label">Browse</span>
        to select a flyweight factory class.</td>
        <td valign="top" align="left" height="19">&lt;FlyweightFactory&gt;</td>
      </tr>
      <tr>
        <td valign="top" align="left">Modifiers</td>
        <td valign="top" align="left">Select one or more access modifiers for the new class.<ul
        CLASS="UnorderedList">
          <li CLASS="Item">public (uncheck for default visibility)</li>
          <li CLASS="Item">abstract</li>
          <li CLASS="Item">final</li>
        </ul>
        </td>
        <td valign="top" align="left">public, abstract, final</td>
      </tr>
      <tr>
        <td valign="top" align="left" height="38">Superclass</td>
        <td valign="top" align="left" height="38">Type or click&nbsp;<span CLASS="Label">Browse</span>
        to select a superclass for the flyweight factory class.</td>
        <td valign="top" align="left" height="38">&lt;java.lang.Object&gt;</td>
      </tr>
      <tr>
        <td valign="top" align="left">Pool field</td>
        <td valign="top" align="left">Type or select the name of the field that will contain the
          pool of flyweight instances</td>
        <td valign="top" align="left">&lt;pool&gt;</td>
      </tr>
    </table>
    <p><img src="../../images/patterns/flyweight_wizard2.gif" width="438" height="571"></p>
    <table border="1" cellspacing="0" width="100%">
      <tr>
        <td align="center" height="19"><strong>Option</strong></td>
        <td align="center" height="19"><strong>Description</strong></td>
        <td align="center" height="19"><strong>Default</strong></td>
      </tr>
      <tr>
        <td valign="top" align="left">Concrete flyweight classes</td>
        <td valign="top" align="left">Click&nbsp;Add to enter names of concrete
          flyweight classes that
        should be created.</td>
        <td valign="top" align="left">&lt;blank&gt;</td>
      </tr>
      <tr>
        <td valign="top" align="left">Unshared concrete flyweight classes</td>
        <td valign="top" align="left">Click&nbsp;Add to enter names of unshared
          concrete flyweight classes that
        should be created.</td>
        <td valign="top" align="left">&lt;blank&gt;</td>
      </tr>
    </table>
    <h3><a name="Applicability">Applicability</a></h3>
    <p>Use the Flyweight pattern when<ul>
      <li>an application uses a large number of objects.<br>
        <br>
      </li>
      <li>storage costs are high because of the sheer quantity of objects.<br>
        <br>
 </li>
      <li>most object state can be made extrinsic.<br>
        <br>
 </li>
      <li>many groups of objects may be replaced by relatively few shared
        objects once extrinsic state is removed.<br>
        <br>
 </li>
      <li>the application doesn't depend on object identity. Since flyweight
        objects may be shared, identity tests will return true for conceptually
        distinct objects </li>
    </ul>
    <h3><a name="AdditionalResources">Additional Resources</a></h3>
    <p><a href="http://c2.com/cgi/wiki?FlyweightPattern">http://c2.com/cgi/wiki?FlyweightPattern</a></p>
    <p><a href="http://www.wikipedia.org/wiki/flyweight_pattern">http://www.wikipedia.org/wiki/flyweight_pattern</a></p>
    <p><a href="http://www.cmcrossroads.com/bradapp/javapats.html#Flyweight">http://www.cmcrossroads.com/bradapp/javapats.html#Flyweight</a></p>
    <p><a href="http://www.dofactory.com/patterns/pattern_flyweight.asp">http://www.dofactory.com/patterns/pattern_flyweight.asp</a></p>
    </td>
  </tr>
</table>
</body>
</html>
